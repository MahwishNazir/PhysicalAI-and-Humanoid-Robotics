<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
    ROS 2 System Architecture: Simple Mobile Robot
  </text>

  <!-- Camera Node -->
  <rect x="50" y="80" width="120" height="80" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2" rx="5"/>
  <text x="110" y="110" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Camera Node</text>
  <text x="110" y="135" font-size="11" text-anchor="middle" fill="white">Captures images</text>

  <!-- Object Detector Node -->
  <rect x="250" y="80" width="140" height="80" fill="#7B68EE" stroke="#5A4DB8" stroke-width="2" rx="5"/>
  <text x="320" y="110" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Object Detector</text>
  <text x="320" y="135" font-size="11" text-anchor="middle" fill="white">Identifies obstacles</text>

  <!-- Path Planner Node -->
  <rect x="460" y="80" width="130" height="80" fill="#50C878" stroke="#3A9B5C" stroke-width="2" rx="5"/>
  <text x="525" y="110" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Path Planner</text>
  <text x="525" y="135" font-size="11" text-anchor="middle" fill="white">Creates safe route</text>

  <!-- Motor Controller Node -->
  <rect x="340" y="250" width="150" height="80" fill="#FF6B6B" stroke="#CC5555" stroke-width="2" rx="5"/>
  <text x="415" y="280" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Motor Controller</text>
  <text x="415" y="305" font-size="11" text-anchor="middle" fill="white">Executes movement</text>

  <!-- Robot Hardware -->
  <rect x="340" y="400" width="150" height="80" fill="#FFD700" stroke="#CCB000" stroke-width="2" rx="5"/>
  <text x="415" y="430" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Robot Hardware</text>
  <text x="415" y="455" font-size="11" text-anchor="middle" fill="#333">Motors & Sensors</text>

  <!-- Topics (shown as labeled arrows) -->

  <!-- /camera/image_raw -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666" />
    </marker>
  </defs>

  <!-- Camera -> Object Detector -->
  <line x1="170" y1="120" x2="250" y2="120" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="210" y="110" font-size="10" text-anchor="middle" fill="#333">/camera/image_raw</text>

  <!-- Object Detector -> Path Planner -->
  <line x1="390" y1="120" x2="460" y2="120" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="425" y="110" font-size="10" text-anchor="middle" fill="#333">/objects</text>

  <!-- Path Planner -> Motor Controller -->
  <path d="M 525 160 Q 525 200, 465 250" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="500" y="210" font-size="10" text-anchor="middle" fill="#333">/path</text>

  <!-- Motor Controller -> Robot Hardware -->
  <line x1="415" y1="330" x2="415" y2="400" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="450" y="370" font-size="10" text-anchor="middle" fill="#333">/cmd_vel</text>

  <!-- Robot Hardware -> Path Planner (feedback loop) -->
  <path d="M 340 440 Q 200 440, 200 200 Q 200 80, 460 80" stroke="#FF8C00" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowhead)"/>
  <text x="150" y="440" font-size="10" text-anchor="middle" fill="#FF8C00">/odom (feedback)</text>

  <!-- Legend -->
  <rect x="620" y="250" width="160" height="180" fill="#F5F5F5" stroke="#999" stroke-width="1" rx="3"/>
  <text x="700" y="275" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Legend</text>

  <rect x="630" y="290" width="30" height="20" fill="#4A90E2" stroke="#2E5C8A" stroke-width="1"/>
  <text x="670" y="305" font-size="11" text-anchor="start" fill="#333">Node (Process)</text>

  <line x1="630" y1="330" x2="660" y2="330" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="670" y="335" font-size="11" text-anchor="start" fill="#333">Topic (Data Flow)</text>

  <line x1="630" y1="360" x2="660" y2="360" stroke="#FF8C00" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="670" y="365" font-size="11" text-anchor="start" fill="#333">Feedback Loop</text>

  <text x="700" y="395" font-size="10" text-anchor="middle" fill="#666" font-style="italic">Each node runs</text>
  <text x="700" y="410" font-size="10" text-anchor="middle" fill="#666" font-style="italic">independently</text>

  <!-- Bottom note -->
  <text x="400" y="570" font-size="12" text-anchor="middle" fill="#666">
    This architecture enables modular, scalable robot systems where components can be developed and tested separately.
  </text>
</svg>
